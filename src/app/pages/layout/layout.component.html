<div class="game-layout-container">
  <!-- Menú lateral hamburguesa -->
  <div class="layout-menu">
    <app-menu (menuAction)="handleMenuAction($event)"></app-menu>
  </div>

  <!-- Indicadores de estado (dinero, afinidad...) -->
  <div class="layout-info">
    <app-info></app-info>
  </div>

  <!-- Barra de acciones principal (hablar, misión, etc.) -->
  <div class="layout-sidebar">
    <app-sidebar (action)="handleSidebarAction($event)"></app-sidebar>
  </div>

  <!-- Área principal donde se renderizarán las páginas (como 'main') -->
  <main class="layout-main">
    <router-outlet></router-outlet>
  </main>
</div>

<!-- ========= MODALES ========= -->
<!-- Su visibilidad se controla desde el .ts del layout -->

<!-- Modal de Diálogo -->
@if (isDialogueVisible()) {
  <div class="modal-overlay">
    <app-dialogue [dialogue]="currentDialogue()" (optionSelected)="handleDialogueOption($event)"></app-dialogue>
  </div>
}

<!-- Modal de Inventario/Equipamiento -->
@if (isInventoryVisible()) {
  <div class="modal-overlay">
    <app-inventory (close)="closeActiveModal()"></app-inventory>
  </div>
}

<!-- Modal de Crafteo -->
@if (isCraftingVisible()) {
  <div class="modal-overlay">
    <app-crafting (close)="closeActiveModal()"></app-crafting>
  </div>
}

<!-- Modal de Tienda -->
@if (isMarketVisible()) {
  <div class="modal-overlay">
    <app-shop (closeShop)="closeActiveModal()"></app-shop>
  </div>
}

<!-- Modal de Misión -->
@if (isMissionVisible()) {
  <div class="modal-overlay">
    <app-mission (close)="closeActiveModal()"></app-mission>
  </div>
}

